<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <title>Asignar Tarea</title>
  <link rel="stylesheet" th:href="@{/css/app.css}" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body class="container py-4">

<h2 class="text-center mb-4">Asignar Tarea a un Usuario</h2>

<div class="card shadow p-4 mb-4">
  <form th:action="@{/tareas/jefe/asignar}" method="post" th:object="${nuevaTarea}">
    <!-- Selección de usuario -->
    <div class="mb-3">
      <label for="userSelect" class="form-label"><strong>Selecciona un usuario:</strong></label>
      <select th:field="*{loginTarea}" id="userSelect" class="form-select" required>
        <option value="" disabled selected>Elige un usuario</option>
        <option th:each="usuario : ${usuarios}"
                th:value="${usuario.id}"
                th:text="${usuario.nombre + ' (' + usuario.email + ')'}">
        </option>
      </select>
    </div>

    <!-- Selección de tipo de tarea -->
    <div class="mb-3">
      <label for="tipoTarea" class="form-label"><strong>Tipo de tarea:</strong></label>
      <select th:field="*{tipoTarea.id}" id="tipoTarea" class="form-select" required>
        <option value="" disabled selected>Selecciona un tipo</option>
        <option th:each="tipo : ${tiposTarea}" th:value="${tipo.id}" th:text="${tipo.tarea}"></option>
      </select>
    </div>

    <!-- Datos de la tarea -->
    <div class="mb-3">
      <label for="taskName" class="form-label"><strong>Nombre de la tarea:</strong></label>
      <input type="text" th:field="*{titulo}" id="taskName" class="form-control" required maxlength="50" />
    </div>

    <div class="mb-3">
      <label for="taskDesc" class="form-label"><strong>Descripción:</strong></label>
      <textarea th:field="*{descripcion}" id="taskDesc" class="form-control" rows="3" required maxlength="200"></textarea>
    </div>

    <!-- Fechas -->
    <div class="mb-3">
      <label for="fechaInicio">Fecha de inicio</label>
      <input type="date" th:field="*{fechaInicio}" id="fechaInicio" class="form-control mb-2" required />
    </div>

    <div class="mb-3">
      <label for="fechaLimite">Fecha límite</label>
      <input type="date" th:field="*{fechaLimite}" id="fechaLimite" class="form-control mb-2" required />
    </div>

    <!-- Botón para añadir tarea -->
    <div class="text-end">
      <button type="submit" class="btn btn-primary">
        <i class="bi bi-plus-circle"></i> Asignar Tarea
      </button>
    </div>
  </form>
</div>

<!-- Volver -->
<div class="text-center">
  <a th:href="@{/tareas}" class="btn btn-secondary">
    <i class="bi bi-arrow-left-circle"></i> Volver a Lista de Tareas
  </a>
</div>

</body>
</html>
